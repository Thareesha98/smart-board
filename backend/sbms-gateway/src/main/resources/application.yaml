server:
  port: 8080

spring:
  application:
    name: sbms-gateway

  cloud:
    gateway:

      # Remove unnecessary cookies before routing
      default-filters:
        - RemoveRequestHeader=Cookie
        - RemoveRequestHeader=Set-Cookie

      # Global CORS configuration
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedOrigins: "*"             # You can restrict this later
            allowedMethods: "*"
            allowedHeaders: "*"
            allowCredentials: true

      # -----------------------------------------
      #              ROUTE DEFINITIONS
      # -----------------------------------------
      routes:

        # Notification Service Route
        - id: notification-service
          uri: lb://sbms-notification-service
          predicates:
            - Path=/api/notifications/**
          filters:
            - StripPrefix=1   # removes /api

logging:
  level:
    root: INFO
    org.springframework.cloud.gateway: DEBUG

# JWT configuration (will be replaced by Kubernetes Secret)
jwt:
  secret: ${JWT_SECRET}
